<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Referee Watch Setup</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111111;
      color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .wrapper {
      position: relative;
    }

    .watch-container {
      position: relative;
      background-color: #222;
      border: 8px solid #00ff88;
      border-radius: 20px;
      width: 350px;
      padding: 30px 20px 60px;
      box-sizing: border-box;
    }

    .watch-header {
      text-align: center;
      margin-bottom: 10px;
    }

    .field {
      margin: 10px 0;
      font-size: 1rem;
    }

    .selected {
      color: #00ff88;
      font-weight: bold;
    }

    .edit-mode {
      margin-top: 10px;
      color: yellow;
      font-weight: bold;
      text-align: center;
    }

    /* Buttons around the watch */
    .btn {
      position: absolute;
      background: #00ff88;
      color: #000;
      border: none;
      padding: 10px 10px;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 6px;
      height: 50px;
      width: 40px;
    }

    #btnA { top: 25px; left: 0; transform: translateX(-100%); }
    #btnB { top: 25px; right: 0; transform: translateX(100%); }
    #btnC { bottom: 25px; left: 0; transform: translateX(-100%); }
    #btnD { bottom: 25px; right: 0; transform: translateX(100%); }
    #btnE {
      bottom: -40px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Buttons around the watch face -->
    <button class="btn" id="btnA">A</button>
    <button class="btn" id="btnB">B</button>
    <button class="btn" id="btnC">C</button>
    <button class="btn" id="btnD">D</button>
    <button class="btn" id="btnE">E</button>

    <!-- Watch face -->
    <div class="watch-container">
      <h2 id = "mode"></h2>
      <div id="fields"></div>
      <div class="edit-mode" id="editIndicator">Edit Mode: OFF</div>
    </div>
  </div>

  <script>
    const fields = [
      { label: 'Half Length (min)', key: 'halfLength', value: 45, type: 'number' },
      { label: 'Halftime Length (min)', key: 'halftimeLength', value: 15, type: 'number' },
      { label: 'Substitution Limit', key: 'subs', value: 5, type: 'number' },
      { label: 'Overtime Period (min)', key: 'overtimeLength', value: 15, type: 'number' },
      { label: 'Enable Stoppage Time', key: 'stoppageTime', value: true, type: 'boolean' },
      { label: 'Enable Overtime', key: 'overtime', value: false, type: 'boolean' },
      { label: 'Enable Penalty Shootout', key: 'penaltyShootout', value: false, type: 'boolean' }
    ];
    
    let mode = 'Game Setup';
    updateMode();
    
    let selectedIndex = 0;
    let isEditMode = false;
    let holdTimeout;

    const fieldsDiv = document.getElementById('fields');
    const editIndicator = document.getElementById('editIndicator');

    function renderFields() {
      fieldsDiv.innerHTML = '';
      fields.forEach((field, index) => {
        const div = document.createElement('div');
        div.className = 'field';
        if (isEditMode && index === selectedIndex) div.classList.add('selected');
        div.innerText = `${field.label}: ${field.value}`;
        fieldsDiv.appendChild(div);
      });
      editIndicator.innerText = `Edit Mode: ${isEditMode ? 'ON' : 'OFF'}`;
    }

    function increaseValue() {
      const field = fields[selectedIndex];
      if (field.type === 'number') {
        field.value += 1;
      } else {
        field.value = !field.value;
      }
      renderFields();
    }

    function decreaseValue() {
      const field = fields[selectedIndex];
      if (field.type === 'number') {
        if (field.value > 0) field.value -= 1;
      } else {
        field.value = !field.value;
      }
      renderFields();
    }

    // Button A: hold to toggle edit mode, press to cycle selection
    const btnA = document.getElementById('btnA');
    btnA.addEventListener('mousedown', () => {
      holdTimeout = setTimeout(() => {
        isEditMode = !isEditMode;
        renderFields();
      }, 700); // hold duration to toggle edit mode
    });

    btnA.addEventListener('mouseup', () => {
      clearTimeout(holdTimeout);
      if (isEditMode) {
        selectedIndex = (selectedIndex + 1) % fields.length;
        renderFields();
      }
    });

    // B increases
    document.getElementById('btnB').addEventListener('click', () => {
      if (isEditMode) increaseValue();
    });

    // D decreases
    document.getElementById('btnD').addEventListener('click', () => {
      if (isEditMode) decreaseValue();
    });
    
    // C goes backwards in mode progression
    document.getElementById('btnC').addEventListener('click', () => {
      if (mode === 'Team Setup' && isEditMode === false) {
        mode = 'Game Setup';
        updateMode();
      }
    });
    
    // E goes forwards in mode progression
    document.getElementById('btnE').addEventListener('click', () => {
      if (mode === 'Game Setup' && isEditMode === false) {
        mode = 'Team Setup';
        updateMode();
      }
    });

    renderFields();
    
    function updateMode() {
      document.getElementById('mode').innerHTML = mode
    }
  </script>
</body>
</html>
